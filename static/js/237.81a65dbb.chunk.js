"use strict";(self.webpackChunkmultiview_dataset_downloader=self.webpackChunkmultiview_dataset_downloader||[]).push([[237],{7237:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(5043),r=a(7774),s=a(5328),n=a(1072),o=a(8602),c=a(8786),i=a(2518),d=a(5865),h=a(7016),u=a(9413),x=a(707),g=a(4935),p=a(5434),j=a(5766),m=a.n(j),f=a(1354),v=a(579);const y=e=>{let{nodes:t,links:a}=e;const r=(0,l.useRef)();return(0,l.useEffect)((()=>{console.log("NODES",t),console.log("LINKS",a);const e=f.Ltv(r.current),l=e.attr("width"),s=e.attr("height"),n=f.tXi(t).force("link",f.kJC(a).id((e=>e.id))).force("charge",f.xJS()).force("center",f.jTM(l/2,s/2)),o=e.append("g").selectAll("line").data(a).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6),c=e.append("g").selectAll("circle").data(t).enter().append("circle").attr("r",5).attr("fill","#69b3a2").call(f.$Er().on("start",(function(e,t){e.active||n.alphaTarget(.3).restart();t.fx=t.x,t.fy=t.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(e,t){e.active||n.alphaTarget(0);t.fx=null,t.fy=null})));return c.append("title").text((e=>e.id)),n.on("tick",(()=>{o.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),c.attr("cx",(e=>e.x)).attr("cy",(e=>e.y))})),()=>{e.selectAll("*").remove()}}),[t,a]),(0,v.jsx)("svg",{ref:r,width:600,height:600})},b=()=>{const e=[(0,v.jsx)(i.A,{children:"Graph"},"graph"),(0,v.jsx)(i.A,{children:"Sankey"},"sankey"),(0,v.jsx)(i.A,{children:"Edge Bundling"},"edgeBunding")],[t,a]=(0,l.useState)("detail"),[j,f]=(0,l.useState)(0),[b,k]=(0,l.useState)([]),[A,N]=(0,l.useState)([]),[S,w]=(0,l.useState)([]);(0,l.useEffect)((()=>{fetch("/Covid19_datastructure/data/celltype_correlation.csv").then((e=>e.text())).then((e=>{m().parse(e,{header:!0,skipEmptyLines:!0,complete:e=>{const t=e.data.map((e=>{const t={};for(const a in e){const l=e[a];isNaN(l)||""===l.trim()?t[a]=l:t[a]=parseFloat(l).toFixed(4)}return t}));N(t)}})}))}),[]);const C=A.length>0?Object.keys(A[0]).map((e=>({name:e,selector:t=>t[e],sortable:!0}))):[];(0,l.useEffect)((()=>{var e;f((e=>{const t=e.flatMap((e=>Object.values(e).map((e=>parseFloat(e))))).filter((e=>!isNaN(e)));return t.reduce(((e,t)=>e+t),0)/t.length})(A)),k(A.length>0?Object.keys(A[0]).map((e=>e)):[]),w((e=j,A.map((t=>{const a={};for(const l in t)a[l]=t[l]>e?1:0;return a}))))}),[j,A]),console.log(Array.isArray(A)),console.log(A),console.log("Cell Threshold",j),console.log("Column",C),console.log(Array.isArray(C)),console.log("columnNames",b),console.log(S);const E=S.length>0?Object.keys(S[0]).map((e=>e)):[];console.log("Filtered colnames",E);const O=S.length>0?Object.keys(S[0]).map((e=>({id:e,group:"group1"}))):[];console.log("Nodes",O);const T=[];return S.forEach(((e,t)=>{const a=Object.keys(S[0])[t];Object.keys(e).forEach((t=>{"id"!==t&&1===e[t]&&T.push({source:a,target:t,value:1})}))})),console.log(T),(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{children:"Cell Network"}),(0,v.jsx)("hr",{}),(0,v.jsxs)(r.A,{defaultActiveKey:"detail",id:"file-info",className:"mb-3",activeKey:t,onSelect:e=>a(e),justify:!0,children:[(0,v.jsx)(s.A,{eventKey:"detail",title:"Detail",children:(0,v.jsxs)(n.A,{children:[(0,v.jsx)(o.A,{xs:3,children:(0,v.jsxs)("div",{className:"border border-dark",children:[(0,v.jsx)("h4",{className:"text-center bg-danger",children:"SETTINGS"}),(0,v.jsxs)("div",{className:"m-3",children:[(0,v.jsx)(d.A,{gutterBottom:!0,children:"Threshold:"}),(0,v.jsx)(h.Ay,{value:j.toFixed(2),getAriaLabel:()=>"Threshold",step:.01,marks:[{value:0,label:"0"},{value:.25,label:"0.25"},{value:.5,label:"0.5"},{value:.75,label:"0.75"},{value:1,label:"1"}],min:0,max:1,valueLabelDisplay:"on",onChange:e=>f(e.target.value)})]}),(0,v.jsx)("div",{className:"m-2 border-dark",children:(0,v.jsx)(u.A,{children:(0,v.jsx)(x.A,{value:"nodeLabels",control:(0,v.jsx)(g.A,{defaultChecked:!0}),label:"Show node labels",labelPlacement:"start"})})}),(0,v.jsx)("div",{className:"m-2 border-dark",children:(0,v.jsx)(p.A,{orientation:"vertical","aria-label":"Vertical button group",children:e})})]})}),(0,v.jsx)(o.A,{xs:8,children:(0,v.jsx)("div",{className:"border border-dark",children:(0,v.jsx)(y,{nodes:O,links:T})})})]})}),(0,v.jsx)(s.A,{eventKey:"data",title:"Data",children:A.length>0?(0,v.jsx)(c.Ay,{columns:C,data:A,pagination:!0,paginationPerPage:10,paginationRowsPerPageOptions:[5,10,15,20]}):(0,v.jsx)("div",{children:"Loading..."})}),(0,v.jsx)(s.A,{eventKey:"column",title:"Column",children:(0,v.jsx)("ul",{children:b.map(((e,t)=>(0,v.jsx)("li",{children:e},t)))})})]})]})}}}]);
//# sourceMappingURL=237.81a65dbb.chunk.js.map